<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>829dd6626800410686f738b1f2662303</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>&lt;!DOCTYPE html&gt;</p>
<p>&lt;html lang="it"&gt;</p>
<p>&lt;head&gt;</p>
<p>&lt;meta charset="UTF-8"&gt;</p>
<p>&lt;meta name="viewport" content="width=device-width,
initial-scale=1.0, maximum-scale=1.0, user-scalable=no"&gt;</p>
<p>&lt;meta name="apple-mobile-web-app-capable" content="yes"&gt;</p>
<p>&lt;meta name="apple-mobile-web-app-status-bar-style"
content="black-translucent"&gt;</p>
<p>&lt;meta name="apple-mobile-web-app-title"
content="Calcolatrice"&gt;</p>
<p>&lt;link rel="apple-touch-icon"
href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJklEQVR4nO3dS27UQBSG0W6JBbAONsE+2ARrYB0sgHWwCTbBAmBCZUQkohCVx67H/Z1zRkgZRBL9q36WXXYLAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPAyh+P+8Hq7O23+FVh0OO4Pb49fTl/2n0+b3weWHLbbD6fL9M/2y/7TdvshdAY4w9vtx0v0H4z/yfF4+BQ6B5xhuz0c/xX+a+P/Gh3B3G0+fA+dgWe6/UX+t6D/DP+n6AhmbvPuW+gMPNF2++507dl7FT0AzFzonz8ST+P/czruz/cC0RHM3J3fzM+M/4+zn+0/RI8Ac3Tn1fKzo/9r/JfoCGbuzmfLZzp7BT0AzN3dr5bnRP95uz0coyOYuTuvlue8Wn65/CG/c0RHgLm780OZc18tz4n/0+ar5f8enkVHgLmbG/y/Xdvo778dv4aOAHP3v7scF97leBS/V8vM3QPvctx5tfzP+D+GjgBz98C7HHd+M59+OZ9D/yMwd3PvQ19+l+N+/H8+/t6vlidgzua+nz73PvSj43/t+D2EZs7mvg/92PvQj4z/pfHrQ5M1d/Dfer/5sfF/Ofp9aLLmDv5b7zc/Nv6Xx+/VktS5g//W+82PjX8/fq+WZM4d/Pe63/xg/N/272LHgOy5g//e+82Pxn/a7t9HjwHZcwe/H4qQNXfwX3q/+aH4X22/R48B2XMH/6X3mx+K/9X2OHoMyJ47+O+933w//v3oMSB77uC/937z/fi/Ro8B2ech+Me83/xQ/Efj14cm7SGD/977zQ/F7/0cyJw7+O+933w/fi/j14cm7SGD/977zQ/F7/0cyJw7+O+933w//pPx60OTNXfw33u/+X78J+PXhyZr7uC/937z/fg/XPahv0WPAdlzB/+995vvx/91/3Hq1ZLMuYP/3vvN9+PfXxv/t9AxIHvu4Pe+M1lzB7/3ncmaO/i970zW3MHvfWey5g5+7zuTNXfwe9+ZrLmD3/vOZM0d/N53JuuS4L/3fvP9+K+N/3vsGJA9d/Dfe7/5fvx/N35v6JA1d/Df+uHGQ/H/2vi970zW3MF/6/3mh+L/tfF735msuYP/1vvND8X/a+N/fdu/hc4BAAAAAAAAAAAAAAAAAAAAAAAAAAAA8CJ/AA5tshlXL9mlAAAAAElFTkSuQmCC"&gt;</p>
<p>&lt;title&gt;Calcolatrice iOS 16&lt;/title&gt;</p>
<p>&lt;style&gt;</p>
<p>* {</p>
<p>margin: 0;</p>
<p>padding: 0;</p>
<p>box-sizing: border-box;</p>
<p>-webkit-tap-highlight-color: transparent;</p>
<p>user-select: none;</p>
<p>-webkit-user-select: none;</p>
<p>}</p>
<p>body {</p>
<p>font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display',
sans-serif;</p>
<p>background: #000;</p>
<p>height: 100vh;</p>
<p>display: flex;</p>
<p>flex-direction: column;</p>
<p>overflow: hidden;</p>
<p>}</p>
<p>.calculator {</p>
<p>flex: 1;</p>
<p>display: flex;</p>
<p>flex-direction: column;</p>
<p>padding: 20px;</p>
<p>max-width: 500px;</p>
<p>margin: 0 auto;</p>
<p>width: 100%;</p>
<p>}</p>
<p>.display {</p>
<p>flex: 1;</p>
<p>display: flex;</p>
<p>align-items: flex-end;</p>
<p>justify-content: flex-end;</p>
<p>padding: 20px 10px;</p>
<p>min-height: 150px;</p>
<p>}</p>
<p>.display-text {</p>
<p>color: #fff;</p>
<p>font-size: 90px;</p>
<p>font-weight: 200;</p>
<p>letter-spacing: -2px;</p>
<p>text-align: right;</p>
<p>line-height: 1;</p>
<p>}</p>
<p>.buttons {</p>
<p>display: grid;</p>
<p>grid-template-columns: repeat(4, 1fr);</p>
<p>gap: 12px;</p>
<p>padding-bottom: 10px;</p>
<p>}</p>
<p>.btn {</p>
<p>aspect-ratio: 1;</p>
<p>border-radius: 50%;</p>
<p>border: none;</p>
<p>font-size: 36px;</p>
<p>font-weight: 400;</p>
<p>cursor: pointer;</p>
<p>transition: opacity 0.1s;</p>
<p>display: flex;</p>
<p>align-items: center;</p>
<p>justify-content: center;</p>
<p>}</p>
<p>.btn:active {</p>
<p>opacity: 0.5;</p>
<p>}</p>
<p>.btn-gray {</p>
<p>background: #a5a5a5;</p>
<p>color: #000;</p>
<p>}</p>
<p>.btn-dark {</p>
<p>background: #333;</p>
<p>color: #fff;</p>
<p>}</p>
<p>.btn-orange {</p>
<p>background: #ff9f0a;</p>
<p>color: #fff;</p>
<p>}</p>
<p>.btn-orange.active {</p>
<p>background: #fff;</p>
<p>color: #ff9f0a;</p>
<p>}</p>
<p>.btn-zero {</p>
<p>grid-column: span 2;</p>
<p>border-radius: 50px;</p>
<p>aspect-ratio: 2.15/1;</p>
<p>justify-content: flex-start;</p>
<p>padding-left: 32px;</p>
<p>}</p>
<p>@media (max-width: 400px) {</p>
<p>.display-text {</p>
<p>font-size: 70px;</p>
<p>}</p>
<p>.btn {</p>
<p>font-size: 32px;</p>
<p>}</p>
<p>}</p>
<p>&lt;/style&gt;</p>
<p>&lt;/head&gt;</p>
<p>&lt;body&gt;</p>
<p>&lt;div class="calculator"&gt;</p>
<p>&lt;div class="display"&gt;</p>
<p>&lt;div class="display-text" id="display"&gt;0&lt;/div&gt;</p>
<p>&lt;/div&gt;</p>
<p>&lt;div class="buttons"&gt;</p>
<p>&lt;button class="btn btn-gray" id="clear"&gt;AC&lt;/button&gt;</p>
<p>&lt;button class="btn btn-gray" id="sign"&gt;+/-&lt;/button&gt;</p>
<p>&lt;button class="btn btn-gray" id="percent"&gt;%&lt;/button&gt;</p>
<p>&lt;button class="btn btn-orange" data-op="÷"&gt;÷&lt;/button&gt;</p>
<p>&lt;button class="btn btn-dark" data-num="7"&gt;7&lt;/button&gt;</p>
<p>&lt;button class="btn btn-dark" data-num="8"&gt;8&lt;/button&gt;</p>
<p>&lt;button class="btn btn-dark" data-num="9"&gt;9&lt;/button&gt;</p>
<p>&lt;button class="btn btn-orange" data-op="×"&gt;×&lt;/button&gt;</p>
<p>&lt;button class="btn btn-dark" data-num="4"&gt;4&lt;/button&gt;</p>
<p>&lt;button class="btn btn-dark" data-num="5"&gt;5&lt;/button&gt;</p>
<p>&lt;button class="btn btn-dark" data-num="6"&gt;6&lt;/button&gt;</p>
<p>&lt;button class="btn btn-orange" data-op="-"&gt;-&lt;/button&gt;</p>
<p>&lt;button class="btn btn-dark" data-num="1"&gt;1&lt;/button&gt;</p>
<p>&lt;button class="btn btn-dark" data-num="2"&gt;2&lt;/button&gt;</p>
<p>&lt;button class="btn btn-dark" data-num="3"&gt;3&lt;/button&gt;</p>
<p>&lt;button class="btn btn-orange" data-op="+"&gt;+&lt;/button&gt;</p>
<p>&lt;button class="btn btn-dark btn-zero"
data-num="0"&gt;0&lt;/button&gt;</p>
<p>&lt;button class="btn btn-dark" id="decimal"&gt;,&lt;/button&gt;</p>
<p>&lt;button class="btn btn-orange" id="equals"&gt;=&lt;/button&gt;</p>
<p>&lt;/div&gt;</p>
<p>&lt;/div&gt;</p>
<p>&lt;script&gt;</p>
<p>class Calculator {</p>
<p>constructor() {</p>
<p>this.display = document.getElementById('display');</p>
<p>this.displayValue = '0';</p>
<p>this.firstOperand = null;</p>
<p>this.waitingForOperand = false;</p>
<p>this.operator = null;</p>
<p>this.magicMode = false;</p>
<p>this.magicNumber = null;</p>
<p>this.history = [];</p>
<p>this.initButtons();</p>
<p>this.updateDisplay();</p>
<p>}</p>
<p>initButtons() {</p>
<p>document.querySelectorAll('[data-num]').forEach(btn =&gt; {</p>
<p>btn.addEventListener('click', () =&gt;
this.inputDigit(btn.dataset.num));</p>
<p>});</p>
<p>document.querySelectorAll('[data-op]').forEach(btn =&gt; {</p>
<p>btn.addEventListener('click', () =&gt;
this.performOperation(btn.dataset.op));</p>
<p>});</p>
<p>document.getElementById('clear').addEventListener('click', () =&gt;
this.clear());</p>
<p>document.getElementById('sign').addEventListener('click', () =&gt;
this.toggleSign());</p>
<p>document.getElementById('percent').addEventListener('click', () =&gt;
this.inputPercent());</p>
<p>document.getElementById('decimal').addEventListener('click', () =&gt;
this.inputDecimal());</p>
<p>document.getElementById('equals').addEventListener('click', () =&gt;
this.performOperation('='));</p>
<p>}</p>
<p>inputDigit(digit) {</p>
<p>this.clearOperatorHighlight();</p>
<p>this.history.push({type: 'digit', value: digit});</p>
<p>if (this.waitingForOperand) {</p>
<p>this.displayValue = digit;</p>
<p>this.waitingForOperand = false;</p>
<p>} else {</p>
<p>this.displayValue = this.displayValue === '0' ? digit :
this.displayValue + digit;</p>
<p>}</p>
<p>this.updateDisplay();</p>
<p>}</p>
<p>inputDecimal() {</p>
<p>this.clearOperatorHighlight();</p>
<p>if (this.waitingForOperand) {</p>
<p>this.displayValue = '0.';</p>
<p>this.waitingForOperand = false;</p>
<p>} else if (this.displayValue.indexOf('.') === -1) {</p>
<p>this.displayValue += '.';</p>
<p>}</p>
<p>this.updateDisplay();</p>
<p>}</p>
<p>clear() {</p>
<p>this.displayValue = '0';</p>
<p>this.firstOperand = null;</p>
<p>this.waitingForOperand = false;</p>
<p>this.operator = null;</p>
<p>this.magicMode = false;</p>
<p>this.magicNumber = null;</p>
<p>this.history = [];</p>
<p>this.clearOperatorHighlight();</p>
<p>this.updateDisplay();</p>
<p>}</p>
<p>toggleSign() {</p>
<p>this.displayValue = String(parseFloat(this.displayValue) * -1);</p>
<p>this.updateDisplay();</p>
<p>}</p>
<p>inputPercent() {</p>
<p>this.displayValue = String(parseFloat(this.displayValue) / 100);</p>
<p>this.updateDisplay();</p>
<p>}</p>
<p>performOperation(nextOperator) {</p>
<p>const inputValue = parseFloat(this.displayValue);</p>
<p>this.history.push({type: 'op', value: nextOperator});</p>
<p>this.checkMagicSequence();</p>
<p>if (this.magicMode &amp;&amp; nextOperator !== '=') {</p>
<p>this.operator = nextOperator;</p>
<p>this.waitingForOperand = true;</p>
<p>this.highlightOperator(nextOperator);</p>
<p>return;</p>
<p>}</p>
<p>if (this.magicMode &amp;&amp; nextOperator === '=') {</p>
<p>this.displayValue = this.magicNumber;</p>
<p>this.firstOperand = null;</p>
<p>this.operator = null;</p>
<p>this.waitingForOperand = false;</p>
<p>this.magicMode = false;</p>
<p>this.magicNumber = null;</p>
<p>this.history = [];</p>
<p>this.clearOperatorHighlight();</p>
<p>this.updateDisplay();</p>
<p>return;</p>
<p>}</p>
<p>if (this.firstOperand === null &amp;&amp; !isNaN(inputValue)) {</p>
<p>this.firstOperand = inputValue;</p>
<p>} else if (this.operator) {</p>
<p>const result = this.calculate(this.firstOperand, inputValue,
this.operator);</p>
<p>this.displayValue = String(result);</p>
<p>this.firstOperand = result;</p>
<p>}</p>
<p>this.waitingForOperand = true;</p>
<p>this.operator = nextOperator;</p>
<p>if (nextOperator !== '=') {</p>
<p>this.highlightOperator(nextOperator);</p>
<p>} else {</p>
<p>this.clearOperatorHighlight();</p>
<p>}</p>
<p>this.updateDisplay();</p>
<p>}</p>
<p>checkMagicSequence() {</p>
<p>if (this.history.length &lt; 6) return;</p>
<p>const last6 = this.history.slice(-6);</p>
<p>if (last6[1] &amp;&amp; last6[1].type === 'op' &amp;&amp;
last6[1].value === '+' &amp;&amp;</p>
<p>last6[2] &amp;&amp; last6[2].type === 'digit' &amp;&amp;
last6[2].value === '0' &amp;&amp;</p>
<p>last6[3] &amp;&amp; last6[3].type === 'op' &amp;&amp; last6[3].value
=== '×' &amp;&amp;</p>
<p>last6[4] &amp;&amp; last6[4].type === 'digit' &amp;&amp;
last6[4].value === '0' &amp;&amp;</p>
<p>last6[5] &amp;&amp; last6[5].type === 'op') {</p>
<p>let initialNum = '';</p>
<p>for (let i = 0; i &lt; this.history.length - 5; i++) {</p>
<p>if (this.history[i].type === 'digit') {</p>
<p>initialNum += this.history[i].value;</p>
<p>}</p>
<p>}</p>
<p>if (initialNum) {</p>
<p>this.magicMode = true;</p>
<p>this.magicNumber = initialNum;</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p>calculate(first, second, operator) {</p>
<p>if (operator === '+') return first + second;</p>
<p>if (operator === '-') return first - second;</p>
<p>if (operator === '×') return first * second;</p>
<p>if (operator === '÷') return first / second;</p>
<p>return second;</p>
<p>}</p>
<p>highlightOperator(op) {</p>
<p>this.clearOperatorHighlight();</p>
<p>document.querySelectorAll('[data-op]').forEach(btn =&gt; {</p>
<p>if (btn.dataset.op === op) {</p>
<p>btn.classList.add('active');</p>
<p>}</p>
<p>});</p>
<p>}</p>
<p>clearOperatorHighlight() {</p>
<p>document.querySelectorAll('[data-op]').forEach(btn =&gt; {</p>
<p>btn.classList.remove('active');</p>
<p>});</p>
<p>}</p>
<p>updateDisplay() {</p>
<p>let value = this.displayValue;</p>
<p>if (value.includes('.')) {</p>
<p>const parts = value.split('.');</p>
<p>parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, '.');</p>
<p>value = parts.join(',');</p>
<p>} else {</p>
<p>value = value.replace(/\B(?=(\d{3})+(?!\d))/g, '.');</p>
<p>}</p>
<p>this.display.textContent = value;</p>
<p>const len = value.replace(/[.,]/g, '').length;</p>
<p>if (len &gt; 9) {</p>
<p>this.display.style.fontSize = '50px';</p>
<p>} else if (len &gt; 7) {</p>
<p>this.display.style.fontSize = '60px';</p>
<p>} else if (len &gt; 6) {</p>
<p>this.display.style.fontSize = '70px';</p>
<p>} else {</p>
<p>this.display.style.fontSize = '90px';</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p>new Calculator();</p>
<p>let lastTouchEnd = 0;</p>
<p>document.addEventListener('touchend', e =&gt; {</p>
<p>const now = Date.now();</p>
<p>if (now - lastTouchEnd &lt;= 300) {</p>
<p>e.preventDefault();</p>
<p>}</p>
<p>lastTouchEnd = now;</p>
<p>}, false);</p>
<p>&lt;/script&gt;</p>
<p>&lt;/body&gt;</p>
<p>&lt;/html&gt;</p>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"0357a45f23a943f08700f7f9af191ee6","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>
</html>
